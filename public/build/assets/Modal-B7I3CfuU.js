var I=Object.defineProperty;var T=(n,c,s)=>c in n?I(n,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[c]=s;var N=(n,c,s)=>(T(n,typeof c!="symbol"?c+"":c,s),s);import{j as r}from"./StatisticCard-Bdo2C3ON.js";import{r as o}from"./index-DFv2mRv-.js";import{I as i}from"./InputFormGroup-z0D3_N8V.js";import{S as u}from"./SelectFormGroup-YFq90T3z.js";import{M as A}from"./Modal-C6W508ew.js";import{S as B}from"./sweetalert2.all-DCeKQPlA.js";import{m as C}from"./main-BBbUrZUL.js";import{B as O}from"./Content-DtiuTMAn.js";class G extends O{constructor(){super(...arguments);N(this,"path","coach/agreements");N(this,"code",async()=>{try{const{status:s,result:l}=await C.Fetch(`/api/${this.path}/code`);if(!s)throw new Error((l==null?void 0:l.message)??"Ocurrio un error inesperado");return l.data}catch(s){return C.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:s.message,type:"danger"}),null}})}}const D=new G,Z=({dataLoaded:n,setDataLoaded:c,onSave:s=()=>{}})=>{const l=o.useRef(),m=o.useRef(),a=o.useRef(),p=o.useRef(),f=o.useRef(),d=o.useRef(),h=o.useRef(),x=o.useRef(),v=o.useRef(),R=o.useRef(),g=o.useRef(),j=o.useRef(),y=o.useRef(),b=o.useRef(),w=o.useRef(),_=o.useRef(),q=o.useRef(),S=o.useRef(),[E,M]=o.useState(!1);o.useEffect(()=>{$(l.current).on("hidden.bs.modal",()=>c(null))},[null]),o.useEffect(()=>{n&&F(n)},[n]);const F=e=>{e!=null&&e.id?M(!0):M(!1),m.current.value=(e==null?void 0:e.id)||null,a.current.value=(e==null?void 0:e.request_id)||null,e!=null&&e.contract_number?p.current.value="C"+String(e==null?void 0:e.contract_number).padStart(3,"0"):D.code().then(t=>{p.current.value="C"+String(t).padStart(3,"0")}),f.current.value=(e==null?void 0:e.sessions)||null,$(d.current).val((e==null?void 0:e.process_type)||"coaching").trigger("change"),h.current.value=(e==null?void 0:e.process_topic)||null,x.current.value=(e==null?void 0:e.session_duration)||null,$(v.current).val((e==null?void 0:e.session_frequency)||"weekly").trigger("change"),$(R.current).val((e==null?void 0:e.day)||"L").trigger("change"),g.current.value=(e==null?void 0:e.time)||null,j.current.value=(e==null?void 0:e.location)||null,y.current.value=(e==null?void 0:e.start_date)||null,$(b.current).val((e==null?void 0:e.payment_frequency)||"weekly").trigger("change"),w.current.value=(e==null?void 0:e.total_amount)||null,$(_.current).val((e==null?void 0:e.installments)||1).trigger("change"),q.current.value=(e==null?void 0:e.payment_start_date)||null,S.current.value=(e==null?void 0:e.schedule_change_notice)||null,$(l.current).modal("show")},P=async e=>{e.preventDefault();const{isConfirmed:t}=await B.fire({title:"Confirmar",text:"¿Está seguro de guardar los cambios?",icon:"question",showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"});if(!t)return;const k={id:m.current.value||void 0,request_id:a.current.value,sessions:f.current.value,process_type:d.current.value,process_topic:h.current.value,session_duration:x.current.value,session_frequency:v.current.value,day:R.current.value,time:g.current.value,location:j.current.value,start_date:y.current.value,payment_frequency:b.current.value,total_amount:w.current.value,installments:_.current.value,payment_start_date:q.current.value,schedule_change_notice:S.current.value};await D.save(k)&&(s(),$(l.current).modal("hide"))};return r.jsxs(A,{modalRef:l,title:E?`Modificar acuerdo - C${String(n==null?void 0:n.contract_number).padStart(3,"0")}`:"Redactar acuerdo",onSubmit:P,size:"full-width",isStatic:!0,children:[r.jsx("input",{ref:m,type:"hidden"}),r.jsx("input",{ref:a,type:"hidden"}),r.jsxs("div",{className:"row",children:[r.jsx("h5",{className:"text-info",children:"Datos del acuerdo"}),r.jsx(i,{eRef:p,label:"N° Contrato",col:"col-md-4 col-sm-6 col-xs-12",type:"text",id:"contrato",value:"C097",readOnly:!0}),r.jsx(i,{eRef:f,label:"Número de sesiones",col:"col-md-4 col-sm-6 col-xs-12",type:"number",id:"sesiones",required:!0,min:1})]}),r.jsxs("div",{className:"row mt-2",id:"conditions-container",children:[r.jsx("h5",{className:"text-info",children:"Condiciones para el proceso de coaching"}),r.jsx("p",{children:"Hemos acordado para este proceso sujetarnos a las condiciones que se mencionan a continuación:"}),r.jsxs(u,{eRef:d,label:"Tipo de proceso",col:"col-md-4 col-sm-6 col-xs-12",dropdownParent:"#conditions-container",id:"tipoProceso",required:!0,children:[r.jsx("option",{value:"coaching",children:"Coaching"}),r.jsx("option",{value:"mentoring",children:"Mentoring"})]}),r.jsx(i,{eRef:h,label:"Tema del proceso",col:"col-md-8 col-sm-6 col-xs-12",type:"text",id:"temaProceso",required:!0})]}),r.jsxs("div",{className:"row",id:"duration-container",children:[r.jsx(i,{eRef:x,label:"Duración de sesiones (solo Nro horas)",col:"col-md-4 col-sm-6 col-xs-12",type:"number",id:"duracionSesiones",required:!0,min:1}),r.jsxs(u,{eRef:v,label:"Frecuencia de sesión",col:"col-md-4 col-sm-6 col-xs-12",id:"frecuenciaSesion",dropdownParent:"#duration-container",required:!0,children:[r.jsx("option",{value:"weekly",children:"Semanal"}),r.jsx("option",{value:"biweekly",children:"Quincenal"}),r.jsx("option",{value:"monthly",children:"Mensual"})]}),r.jsxs(u,{eRef:R,label:"Día",col:"col-md-4 col-sm-6 col-xs-12",id:"dia",dropdownParent:"#duration-container",required:!0,children:[r.jsx("option",{value:"D",children:"Domingo"}),r.jsx("option",{value:"L",children:"Lunes"}),r.jsx("option",{value:"M",children:"Martes"}),r.jsx("option",{value:"X",children:"Miércoles"}),r.jsx("option",{value:"J",children:"Jueves"}),r.jsx("option",{value:"V",children:"Viernes"}),r.jsx("option",{value:"S",children:"Sábado"})]})]}),r.jsxs("div",{className:"row",children:[r.jsx(i,{eRef:g,label:"Horario",col:"col-md-4 col-sm-6 col-xs-12",type:"time",id:"horario",required:!0}),r.jsx(i,{eRef:j,label:"Lugar",col:"col-md-4 col-sm-6 col-xs-12",type:"text",id:"lugar",placeholder:"Espacio físico o link de reunión remota",required:!0}),r.jsx(i,{eRef:y,label:"Fecha de Inicio",col:"col-md-4 col-sm-6 col-xs-12",type:"date",id:"fechaInicio",required:!0})]}),r.jsxs("div",{className:"row mt-2",id:"billing-container",children:[r.jsx("h5",{className:"text-info",children:"Datos de facturacion"}),r.jsxs(u,{eRef:b,label:"Frecuencia de pago",col:"col-md-4 col-sm-6 col-xs-12",id:"frecuenciaPago",dropdownParent:"#billing-container",required:!0,children:[r.jsx("option",{value:"weekly",children:"Semanal"}),r.jsx("option",{value:"biweekly",children:"Quincenal"}),r.jsx("option",{value:"monthly",children:"Mensual"})]}),r.jsx(i,{eRef:w,label:"Monto total de servicio",col:"col-md-4 col-sm-6 col-xs-12",type:"number",id:"montoTotal",required:!0}),r.jsx(u,{eRef:_,label:"Cantidad de cuotas",col:"col-md-4 col-sm-6 col-xs-12",id:"cantidadCuotas",defaultValue:"1",dropdownParent:"#billing-container",required:!0,children:new Array(10).fill(null).map((e,t)=>r.jsx("option",{value:t+1,children:t+1},t))}),r.jsx(i,{eRef:q,label:"Fecha de inicio de pago de cuota",col:"col-md-4 col-sm-6 col-xs-12",type:"date",id:"fechaInicioPago",required:!0})]}),r.jsxs("div",{className:"row mt-2",children:[r.jsx("h5",{className:"text-info",children:"Otros aspectos importantes"}),r.jsxs("div",{className:"col-12",children:[r.jsx("h6",{children:"Modificaciones de Horarios"}),r.jsxs("p",{children:["Si surgiera algún cambio o impedimento del último momento, por favor avisarme con",r.jsx("input",{ref:S,type:"text",id:"anticipacionAviso",placeholder:"ej. 24 horas",className:"d-inline-block form-control form-control-sm mx-2",style:{width:"150px"},required:!0}),"de anticipación por lo menos y coordinaremos una nueva cita, yo por mi parte haré lo mismo."]})]})]})]})};export{G as A,Z as M};
