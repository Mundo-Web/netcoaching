import{j as t}from"./StatisticCard-Bdo2C3ON.js";import{r}from"./index-DFv2mRv-.js";import{c as C}from"./ReactAppend-CwiwA4iz.js";import{B as R}from"./Base-D2jNg5O4.js";import{C as T}from"./CreateReactScript-yWJ4gJYl.js";import{T as k,R as o}from"./ReactAppend-B_xoNf1Y.js";import{D as l}from"./DxButton-DV0H-ZcL.js";import{M as A,A as F}from"./Modal-a-mKBuX4.js";import{M as f}from"./Modal-MESba8ek.js";import{D as S}from"./Details-CN5R80WR.js";import"./index-DgyC5pTR.js";import"./tippy-react.esm-BVvHiWwH.js";/* empty css              */import"./main-BBbUrZUL.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";import"./index.esm-B502ZfUP.js";/* empty css               */import"./InputFormGroup-z0D3_N8V.js";import"./SelectFormGroup-YFq90T3z.js";import"./sweetalert2.all-DCeKQPlA.js";import"./Content-DtiuTMAn.js";const x=new F,D=()=>{const s=r.useRef(),i=r.useRef(),c=r.useRef(),[h,d]=r.useState(null),[n,b]=r.useState(null),[m,g]=r.useState([]),j=e=>{b(e),$(i.current).modal("show")},v=e=>{console.log(e),g(e.observations),$(c.current).modal("show")},w=async e=>{const{isConfirmed:a}=await Swal.fire({title:"Eliminar registro",text:"Â¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!a||!await x.delete(e)||$(s.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(k,{gridRef:s,title:"Acuerdos",rest:x,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(s.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"coachee.name",caption:"Coachee",dataType:"string",cellTemplate:(e,{data:a})=>{e.text(`${a.coachee.name} ${a.coachee.lastname}`)}},{dataField:"contract_number",caption:"Acuerdo",dataType:"number",cellTemplate:(e,{data:a})=>{e.text("C"+String(a.contract_number).padStart(3,"0"))}},{dataField:"process_topic",caption:"Tema"},{dataField:"created_at",caption:"Fecha",cellTemplate:(e,{data:a})=>{e.text(moment(a.created_at).format("LL"))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:a})=>{switch(a.status){case 1:o(e,t.jsx("span",{className:"badge bg-success rounded-pill",children:"Aprobado"}));break;case 0:o(e,t.jsx("div",{children:t.jsxs("span",{className:"badge bg-danger rounded-pill",onClick:()=>v(a),style:{cursor:"pointer"},children:["Observado",t.jsx("i",{className:"ms-1 mdi mdi-arrow-top-right"})]})}));break;default:o(e,t.jsx("span",{className:"badge bg-dark rounded-pill",children:"Pendiente"}));break}}},{caption:"Acciones",cellTemplate:(e,{data:a})=>{e.css("text-overflow","unset"),e.append(l({className:"btn btn-xs btn-soft-dark",title:"Ver acuerdo",icon:"fas fa-file-invoice",onClick:()=>j(a)})),e.append(l({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>d(a)})),e.append(l({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>w(a.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(A,{dataLoaded:h,setDataLoaded:d,onSave:()=>$(s.current).dxDataGrid("instance").refresh()}),t.jsx(f,{modalRef:i,title:`Acuerdo C${String(n==null?void 0:n.contract_number).padStart(3,"0")}`,hideFooter:!0,size:"lg",children:t.jsx(S,{...n})}),t.jsx(f,{modalRef:c,title:"Observaciones",hideFooter:!0,children:t.jsx("ul",{className:"conversation-list",children:m.map(({observer:e,description:a,created_at:p},u)=>t.jsx("li",{className:u+1==m.length?"mb-0":"",children:t.jsxs("div",{class:"message-list",children:[t.jsx("div",{class:"chat-avatar",children:t.jsx("img",{src:`/api/profile/thumbnail/${e.uuid}`,alt:e.name})}),t.jsxs("div",{class:"conversation-text",children:[t.jsxs("div",{class:"ctext-wrap",children:[t.jsxs("span",{class:"user-name",children:[e.name.split(" ")[0]," ",e.lastname.split(" ")[0]]}),t.jsx("p",{children:a})]}),t.jsx("span",{class:"time",children:moment(p).format("lll")})]})]})},u))})})]})};T((s,i)=>{C(s).render(t.jsx(R,{...i,title:"Acuerdos",children:t.jsx(D,{...i})}))});
